[build]
builder = "nixpacks"
buildCommand = "pip install -r requirements.txt"

[deploy]
startCommand = "python rag_service.py"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# =============================================================================
# Environment variables to set in Railway:
# =============================================================================
#
# Required:
# CHROMA_DB_PATH=/data/chroma_db                    (Persistent storage path)
#
# =============================================================================
# Setup Steps:
# =============================================================================
# 1. Create a Railway Volume and mount at /data
# 2. Set CHROMA_DB_PATH=/data/chroma_db
#
# =============================================================================
# Railway Internal Networking:
# =============================================================================
# This service will be accessible to other services in the same project at:
#   http://rag.railway.internal:4001
#
# Backend should set:
#   RAG_SERVICE_URL=http://rag.railway.internal:4001
